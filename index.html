<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hayat Battleship Calculator</title>

    <link rel="stylesheet" href="./styles/main.css" />
    <script type="module" src="./libs/jquery.js"></script>
  </head>
  <body>



    <!-- ----------------------------------------------------------------------- -->
    <!--                                   MAP                                   -->
    <!-- ----------------------------------------------------------------------- -->


    <div class="map">
      <canvas id="grid" width="2000" height="2000"></canvas>
      <canvas id="map" width="8000" height="8000"></canvas>
      <canvas id="overlay" width="2000" height="2000"></canvas>
    </div>



    <!-- ----------------------------------------------------------------------- -->
    <!--                                  TABS                                   -->
    <!-- ----------------------------------------------------------------------- -->


    <!-- ------------------------------ Controls ------------------------------- -->
    
    <div class="tab-controls">
      <button id="tab-settings"><span class="mgc_settings_3_line"></span></button>
      <button id="tab-save"><span class="mgc_save_2_line"></span></button>
      <button id="tab-map_set"><span class="mgc_map_line"></span></button>
      <button id="tab-new_object"><span class="mgc_add_square_line"></span></button>
      <button id="tab-maneuver"><span class="mgc_edit_2_line"></span></button>
    </div>


    <!-- -------------------------------- Step --------------------------------- -->

    <div class="main-controls">
      <button id="main_controls-step">STEP</button>


      <!-- -------------------------------- Logs --------------------------------- -->

      <div class="step-logs" id="main_controls-step_logs">
        <div class="step-logs-hide" id="step-logs_hide">
          <span>â¬†</span>
          <span>â¬†</span>
          <span>â¬†</span>
          <span>â¬†</span>
          <span>â¬†</span>
        </div>
        <div class="chat-container" id="step-logs_chat-container">

        </div>
        <div class="progress-bar" id="step-process-bar">
          <div class="bar"></div>
        </div>
      </div>
    </div>


    <!-- ---------------------------- Relative Data ---------------------------- -->

    <div class="relative" id="relative" data-active="true">
      <div>
        <button>âœ–</button>
        <div id="relative-contains" class="contains">

        </div>
      </div>
    </div>



    <!-- ----------------------------------------------------------------------- -->
    <!--                                 MODALS                                  -->
    <!-- ----------------------------------------------------------------------- -->


    <div class="modals">


      <!-- ---------------------------- Map Settings ----------------------------- -->

      <div class="modal map-settings" id="modal-settings" data-active="false">
        <div style="
          display: grid;
          grid-template-columns: 1fr 60px 20px
        ">
          <label for="modal-settings-mapres"
            >Map Resolution: </label
          ><input type="number" id="modal-settings-mapres" class="small" placeholder="8000" />px
          <label for="modal-settings-gridres"
            >Grid Resolution: </label
          ><input type="number" id="modal-settings-gridres" class="small" placeholder="2000" />px
          <label for="modal-settings-overlayres"
            >Overlay Resolution: </label
          ><input type="number" id="modal-settings-overlayres" class="small" placeholder="2000" />px
          <label for="modal-settings-auto_focus"
            >Auto focus on sim.</label
          ><input type="checkbox" id="modal-settings-auto_focus" /><span></span>
        </div>
        <button id="modal-settings-updateres" class="fit">Update Resolutions</button>

        <div style="
          display: grid;
          grid-template-columns: 1fr 60px 20px;
          margin-top: 20px;
        ">
          <label for="modal-settings-sim_speedup"
            >Simulation Speedup (mult): </label
          ><input type="number" id="modal-settings-sim_speedup" class="small" placeholder="4" /><span></span>
          <label for="modal-settings-render_per_frame"
            >Call render every </label
          ><input type="number" id="modal-settings-render_per_frame" class="small" placeholder="1" /><span>fr.</span>
          <label for="modal-settings-instant_sim"
            >Instant simulation</label
          ><input type="checkbox" id="modal-settings-instant_sim" />
        </div>

        <div style="margin-top: 20px;">
          <label for="modal-settings-savestate"
            >Save state on exit?</label
          ><input type="checkbox" id="modal-settings-savestate" />
        </div>

        <div>
          <label for="modal-settings-savelogs"
            >Save logs in state/files?</label
          ><input type="checkbox" id="modal-settings-savelogs" />
        </div>

        <div style="margin-top: 20px;">
          <label for="modal-settings-hudsize"
            >Hud Size: </label
          ><input class="small" type="number" id="modal-settings-hudsize" />
        </div>
      </div>


      <!-- ----------------------------- Save & Load ----------------------------- -->

      <div class="modal map-load" id="modal-map_load" data-active="false">
        <select id="modal-map_load-type">
          <option value="load" selected>Load</option>
          <option value="save">Save</option>
        </select>

        <div id="modal-map_load-types" class="sub">
          <div id="modal-map_load-types-load" data-active="true">
            <label for="modal-map_load-types-load-file">
              <input type="file" id="modal-map_load-types-load-file" />
              Upload
            </label>
            <div class="loading" id="modal-map_load-file_load" data-active="false">
              <span class="l1"></span>
              <span class="l2"></span>
              <span class="l3"></span>
              <span class="l4"></span>
            </div>
          </div>
          <div id="modal-map_load-types-save" data-active="false">
            <p>Press button to download the file</p>
            <a style="display: none; " id="modal-map_load-types-load-anchor"></a>
          </div>
        </div>
        <div id="modal-map_load-file_info" class="sub" data-active="false">

        </div>

        <button id="modal-map_load-complete">Do</button>
      </div>

      
      <!-- ------------------------------ Map View ------------------------------- -->

      <div class="modal map-set" id="modal-map_set" data-active="false">
        <div class="gridded">
          <label for="modal-map_set-size"
            >Size: </label
          ><input type="number" id="modal-map_set-size" class="fit" placeholder="10000m" />
          <label for="modal-map_set-grid"
            >Grid: </label
          ><input type="number" id="modal-map_set-grid" class="fit" placeholder="500m" />
        </div>
        <span>Offset:</span>
        <div class="gridded">
          <label for="modal-map_set-offx"
            >X: </label
          ><input type="number" id="modal-map_set-offx" class="fit" placeholder="0m" />
          <label for="modal-map_set-offy"
            >Y: </label
          ><input type="number" id="modal-map_set-offy" class="fit" placeholder="0m" />
        </div>

        <button id="modal-map_set-complete">Set</button>

        <button style="margin-top: 20px;" id="modal-map_set-reset">Reset Map</button>
      </div>


      <!-- ----------------------------- Add Object ------------------------------ -->

      <div class="modal new-object" id="modal-new_object" data-active="false">
        <div>
          <label for="modal-new_object-id"
            >ID: </label
          ><input id="modal-new_object-id" class="fit" placeholder="random uuid" />
        </div>

        <div class="gridded">
          <label for="modal-new_object-x"
            >X: </label
          ><input type="number" class="fit" id="modal-new_object-x" placeholder="500m" />
          <label for="modal-new_object-y"
            >Y: </label
          ><input type="number" class="fit" id="modal-new_object-y" placeholder="500m" />
          <button class="inline aim" id="modal-new_object-aim">âŠ¹</button>
        </div>

        <div class="gridded">
          <label for="modal-new_object-vel"
            >Vel: </label
          ><input type="number" class="fit" id="modal-new_object-vel" placeholder="0m/s" />
          <label for="modal-new_object-dir"
            >Dir: </label
          ><input type="number" class="fit" id="modal-new_object-dir" placeholder="0deg" />
          <input type="checkbox" id="modal-new_object-is_dynamic" checked>
        </div>
        <div class="ui-multilayered-select modal-new_object-disable_on_template" id="modal-new_object-ships">
          <label>Test</label>
          <div class="options">
            
          </div>
        </div><br>

        <div><label for="modal-new_object-img">Sprite</label></div>
        <select class="modal-new_object-disable_on_template" id="modal-new_object-img"></select>
        <div class="gridded modal-new_object-disable_on_template">
          <label for="modal-new_object-img-color">Color:</label>
          <div>
            <span>#</span><input placeholder="ffffff" id="modal-new_object-img-color" class="small" />
          </div>
          
          <label for="modal-new_object-img-size">Size: </label>
          <div>
            <input placeholder="200" id="modal-new_object-img-size" class="small" /><span>px</span>
          </div>
        </div>

        <br>
        <span>Load template</span>
        <div>
          <label for="modal-new_object-load_template" class="fit">
            <input type="file" id="modal-new_object-load_template" />
            Upload
          </label>
        </div>
        <div class="modal-new_object-template_loaded" style="display: none;">
          <div>
            <label for="modal-new_object-template-keep_id">Keep ID</label>
            <input type="checkbox" id="modal-new_object-template-keep_id" checked>
          </div>
          <button id="modal-new_object-template-reset">Reset</button>
        </div>

        <button id="modal-new_object-complete">Set</button>
      </div>



      <!-- ----------------------------------------------------------------------- -->
      <!--                             Object Control                              -->
      <!-- ----------------------------------------------------------------------- -->


      <div class="modal maneuver" id="modal-maneuver" data-active="false">


        <!-- ----------------------------- ID Selector ----------------------------- -->

        <div>
          <label for="modal-maneuver-id"
            >ID: </label
          ><input id="modal-maneuver-id" class="fit" placeholder="" />
          <button class="inline aim" id="modal-maneuver-aim">âŠ¹</button>
        </div>


        <!-- --------------------------- Sub-Tab Select ---------------------------- -->

        <select id="modal-maneuver-type">
          <option value="maneuver" selected>Maneuver</option> 
          <option disabled>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</option>
          <option value="jump_calc">Jump Calculation</option>
          <option value="contact">Contact</option>
          <option disabled>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</option>
          <option value="modules">Modules</option>
          <option disabled>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</option>
          <option value="tasks">Tasks</option>
          <option value="override">Override</option>
          <option value="template">Template</option>
          <option value="delete">Delete</option>
        </select>


        <!-- -------------------------------- Tabs --------------------------------- -->

        <div id="modal-maneuver-types" class="sub">


          <!-- ------------------------------ Maneuver ------------------------------- -->

          <div id="modal-maneuver-types-maneuver" data-active="true">
            <select id="modal-maneuver-types-maneuver-type" class="fit">
              <option value="instant" selected>Instant</option> 
              <option value="continious">Continious</option> 
            </select>
            <div class="gridded" style="margin-top: 5px;">
              <label for="modal-maneuver-types-maneuver-vel"
                >Vel: </label
              ><input type="number" class="small" id="modal-maneuver-types-maneuver-vel" placeholder="0m/s" />
              <label for="modal-maneuver-types-maneuver-dir"
                >Dir: </label
              ><input type="number" class="small" id="modal-maneuver-types-maneuver-dir" placeholder="0deg" />
            </div>

            <label 
              for="modal-maneuver-types-maneuver-applied" 
              style="margin-top: 20px; display: block;"
            >Currnetly applied continious forces:</label>
            <div id="modal-maneuver-types-maneuver-applied">

            </div>
          </div>


          <!-- ---------------------------- Hud (unused) ----------------------------- -->

          <div id="modal-maneuver-types-hud" data-active="false">
            
          </div>


          <!-- -------------------------- Jump Calculation --------------------------- -->

          <div id="modal-maneuver-types-jump_calc" data-active="false">
            <label for="modal-maneuver-types-jump_cal-dist"
              >Dist: </label
            ><input type="number" class="fit" id="modal-maneuver-types-jump_cal-dist" placeholder="0m" />
            <div>
              <span>X: </span><span id="modal-maneuver-types-jump_cal-x">0</span>
            </div>
            <div>
              <span>Y: </span><span id="modal-maneuver-types-jump_cal-y">0</span>
            </div>
          </div>


          <!-- ------------------------------- Contact ------------------------------- -->

          <div id="modal-maneuver-types-contact" data-active="false">
            <div id="modal-maneuver-types-contact-data" data-active="true">
              
            </div>
            <div style="
              display: grid;
              grid-template-columns: 1fr 5fr 20px;
            ">
              <label for="modal-maneuver-types-contact-id"
                >Target: </label
              ><input id="modal-maneuver-types-contact-id" class="fit" placeholder="" />
              <button class="inline aim" id="modal-maneuver-types-contact-aim">âŠ¹</button>
            </div>
            <div id="modal-maneuver-types-contact-contains">

            </div>
          </div>


          <!-- ------------------------------- Modules ------------------------------- -->

          <div id="modal-maneuver-types-modules" data-active="false">
            <div id="modal-maneuver-types-modules-container">
              
            </div>
            <div class="ui-multilayered-select" id="modal-maneuver-types-modules-all">
              <label>Test</label>
              <div class="options"></div>
            </div>
            <select id="modal-maneuver-types-modules-pos">
              <option value="int">Internal</option>
              <option value="ext">External</option>
              <option value="otr">Other</option>
            </select
            ><button id="modal-maneuver-types-modules-add" class="aim">+</button>
          </div>


          <!-- -------------------------------- Tasks -------------------------------- -->

          <div id="modal-maneuver-types-tasks" data-active="false">
            
          </div>
          <div id="modal-maneuver-types-override" data-active="false">
            <div class="ui-multilayered-select" id="modal-maneuver-types-override-target">
              <label>Test</label>
              <div class="options"></div>
            </div>
            <div id="modal-maneuver-types-override-container">

            </div>
          </div>


          <!-- ------------------------------ Template ------------------------------- -->

          <div id="modal-maneuver-types-template" data-active="false">
            <p>Press button to download the template</p>
            <div style="font-size: 14px;">
              <label>Save as drone</label><input type="checkbox" id="modal-maneuver-types-template-as_drone" />
            </div>
            <a style="display: none;" id="modal-maneuver-types-template-load_anchor"></a>
          </div>


          <!-- ------------------------------- Delete -------------------------------- -->

          <div id="modal-maneuver-types-delete" data-active="false">
            <p>Press the button to delete</p>
          </div>
        </div>

        <button id="modal-maneuver-complete">Set</button>
      </div>
    </div>



    <!-- ----------------------------------------------------------------------- -->
    <!--                              CONTEXT MENUS                              -->
    <!-- ----------------------------------------------------------------------- -->


    <!-- ------------------------- Modules Contex Menu ------------------------- -->

    <div id="modal-maneuver-types-modules-contextmenu" style="left: 200px; top: 200px;" data-active="false">
      <div class="state">
        <label id="offline">â­•</label>
        <label id="online">ðŸ”˜</label>
        <label id="active">ðŸŸ¢</label>
        <label id="overload">ðŸ’¢</label>
      </div>
      <button id="delete">Delete</button>
    </div>



    <!-- ----------------------------------------------------------------------- -->
    <!--                             LOADING MODALS                              -->
    <!-- ----------------------------------------------------------------------- -->
    

    <div id="loading-modals" class="loading-modals" data-active="true">


      <!-- ----------------- Initial modules/battleships loading ----------------- -->

      <div id="loading-inital" data-active="true">
        <p class="points">Loading modules</p>
        <div class="progress-bar" id="loading-inital-bar-modules">
          <div class="bar"></div>
        </div>
        <p class="points">Loading battleships</p>
        <div class="progress-bar" id="loading-inital-bar-battleships">
          <div class="bar"></div>
        </div>
      </div>


      <!-- ---------------------------- Level loading ---------------------------- -->

      <div id="loading-level" data-active="false">
        <p class="points">Loading level</p>
        <div class="progress-bar" id="loading-level-bar">
          <div class="bar"></div>
        </div>
      </div>
    </div>



    <!-- ----------------------------------------------------------------------- -->
    <!--                                 SCRIPTS                                 -->
    <!-- ----------------------------------------------------------------------- -->


    <script type="module" src="./js/main.js"></script>
  </body>
</html>
